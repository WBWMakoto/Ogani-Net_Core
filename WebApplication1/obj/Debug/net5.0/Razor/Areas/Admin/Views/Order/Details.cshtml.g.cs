#pragma checksum "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml" "{8829d00f-11b8-4213-878b-770e8597ac16}" "9185f6e012c74b6b1181056024e64cfe086b7defe4d06b97bb312325d0e2529f"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Areas_Admin_Views_Order_Details), @"mvc.1.0.view", @"/Areas/Admin/Views/Order/Details.cshtml")]
namespace AspNetCore
{
    #line default
    using global::System;
    using global::System.Collections.Generic;
    using global::System.Linq;
    using global::System.Threading.Tasks;
    using global::Microsoft.AspNetCore.Mvc;
    using global::Microsoft.AspNetCore.Mvc.Rendering;
    using global::Microsoft.AspNetCore.Mvc.ViewFeatures;
    #line default
    #line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"Sha256", @"9185f6e012c74b6b1181056024e64cfe086b7defe4d06b97bb312325d0e2529f", @"/Areas/Admin/Views/Order/Details.cshtml")]
    #nullable restore
    public class Areas_Admin_Views_Order_Details : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<WebApplication1.Models.Order>
    #nullable disable
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n");
#nullable restore
#line 3 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
  
    ViewData["Title"] = "Chi tiết đơn hàng";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";

#line default
#line hidden
#nullable disable

            WriteLiteral("\r\n<!-- Content Header (Page header) -->\r\n<div class=\"content-header\">\r\n    <div class=\"container-fluid\">\r\n        <div class=\"row mb-2\">\r\n            <div class=\"col-sm-6\">\r\n                <h1 class=\"m-0\">Chi tiết đơn hàng #");
            Write(
#nullable restore
#line 13 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                                                    Model.Id

#line default
#line hidden
#nullable disable
            );
            WriteLiteral("</h1>\r\n            </div>\r\n            <div class=\"col-sm-6\">\r\n                <ol class=\"breadcrumb float-sm-right\">\r\n                    <li class=\"breadcrumb-item\"><a href=\"#\">Trang chủ</a></li>\r\n                    <li class=\"breadcrumb-item\"><a");
            BeginWriteAttribute("href", " href=\"", 639, "\"", 699, 1);
            WriteAttributeValue("", 646, 
#nullable restore
#line 18 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                                                          Url.Action("Index", "Order", new { area = "Admin" })

#line default
#line hidden
#nullable disable
            , 646, 53, false);
            EndWriteAttribute();
            WriteLiteral(@">Đơn hàng</a></li>
                    <li class=""breadcrumb-item active"">Chi tiết</li>
                </ol>
            </div>
        </div>
    </div>
</div>

<!-- Main content -->
<section class=""content"">
    <div class=""container-fluid"">
        <!-- Thông báo -->
        <div id=""statusMessage"" style=""display: none;"" class=""alert alert-dismissible"">
            <button type=""button"" class=""close"" data-dismiss=""alert"" aria-hidden=""true"">×</button>
            <h5><i id=""statusIcon"" class=""icon""></i> Thông báo</h5>
            <span id=""statusText""></span>
        </div>

        <div class=""row"">
            <div class=""col-md-6"">
                <div class=""card"">
                    <div class=""card-header"">
                        <h3 class=""card-title"">Thông tin khách hàng</h3>
                    </div>
                    <div class=""card-body"">
                        <dl class=""row"">
                            <dt class=""col-sm-4"">Họ và tên:</dt>
                    ");
            WriteLiteral("        <dd class=\"col-sm-8\">");
            Write(
#nullable restore
#line 45 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                                                  Model.FirstName

#line default
#line hidden
#nullable disable
            );
            WriteLiteral(" ");
            Write(
#nullable restore
#line 45 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                                                                   Model.LastName

#line default
#line hidden
#nullable disable
            );
            WriteLiteral("</dd>\r\n                            <dt class=\"col-sm-4\">Email:</dt>\r\n                            <dd class=\"col-sm-8\">");
            Write(
#nullable restore
#line 47 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                                                  Model.Email

#line default
#line hidden
#nullable disable
            );
            WriteLiteral("</dd>\r\n                            <dt class=\"col-sm-4\">Số điện thoại:</dt>\r\n                            <dd class=\"col-sm-8\">");
            Write(
#nullable restore
#line 49 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                                                  Model.Phone

#line default
#line hidden
#nullable disable
            );
            WriteLiteral("</dd>\r\n                            <dt class=\"col-sm-4\">Địa chỉ:</dt>\r\n                            <dd class=\"col-sm-8\">");
            Write(
#nullable restore
#line 51 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                                                  Model.Address

#line default
#line hidden
#nullable disable
            );
            WriteLiteral(", ");
            Write(
#nullable restore
#line 51 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                                                                  Model.Address2

#line default
#line hidden
#nullable disable
            );
            WriteLiteral(", ");
            Write(
#nullable restore
#line 51 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                                                                                   Model.City

#line default
#line hidden
#nullable disable
            );
            WriteLiteral(", ");
            Write(
#nullable restore
#line 51 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                                                                                                Model.Country

#line default
#line hidden
#nullable disable
            );
            WriteLiteral("</dd>\r\n                            <dt class=\"col-sm-4\">Ghi chú:</dt>\r\n                            <dd class=\"col-sm-8\">");
            Write(
#nullable restore
#line 53 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                                                  Model.OrderNotes

#line default
#line hidden
#nullable disable
            );
            WriteLiteral(@"</dd>
                        </dl>
                    </div>
                </div>
            </div>
            <div class=""col-md-6"">
                <div class=""card"">
                    <div class=""card-header"">
                        <h3 class=""card-title"">Thông tin đơn hàng</h3>
                    </div>
                    <div class=""card-body"">
                        <dl class=""row"">
                            <dt class=""col-sm-4"">Mã đơn hàng:</dt>
                            <dd class=""col-sm-8"">");
            Write(
#nullable restore
#line 66 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                                                  Model.Id

#line default
#line hidden
#nullable disable
            );
            WriteLiteral("</dd>\r\n                            <dt class=\"col-sm-4\">Ngày đặt hàng:</dt>\r\n                            <dd class=\"col-sm-8\">");
            Write(
#nullable restore
#line 68 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                                                  Model.OrderDate.ToString("dd/MM/yyyy HH:mm")

#line default
#line hidden
#nullable disable
            );
            WriteLiteral("</dd>\r\n                            <dt class=\"col-sm-4\">Tổng tiền:</dt>\r\n                            <dd class=\"col-sm-8\">");
            Write(
#nullable restore
#line 70 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                                                  Model.TotalAmount.ToString("N0")

#line default
#line hidden
#nullable disable
            );
            WriteLiteral(" VNĐ</dd>\r\n                            <dt class=\"col-sm-4\">Trạng thái:</dt>\r\n                            <dd class=\"col-sm-8\" id=\"orderStatus\">");
            Write(
#nullable restore
#line 72 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                                                                   Model.Status

#line default
#line hidden
#nullable disable
            );
            WriteLiteral("</dd>\r\n                            <dt class=\"col-sm-4\">Phương thức thanh toán:</dt>\r\n                            <dd class=\"col-sm-8\">");
            Write(
#nullable restore
#line 74 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                                                  Model.PaymentMethod

#line default
#line hidden
#nullable disable
            );
            WriteLiteral(@"</dd>
                        </dl>

                        <!-- Dropdown và nút cập nhật trạng thái -->
                        <div class=""form-group"">
                            <label for=""statusSelect"">Cập nhật trạng thái:</label>
                            <select id=""statusSelect"" class=""form-control"">
                                <option");
            BeginWriteAttribute("value", " value=\"", 3910, "\"", 3918, 0);
            EndWriteAttribute();
            WriteLiteral(@" disabled selected>Chọn trạng thái</option>
                                <option value=""Shipped"">Đang vận chuyển</option>
                                <option value=""Delivered"">Đã giao hàng</option>
                                <option value=""Cancelled"">Đã hủy</option>
                            </select>
                        </div>
                        <button id=""updateStatusBtn"" class=""btn btn-primary"" data-order-id=""");
            Write(
#nullable restore
#line 87 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                                                                                             Model.Id

#line default
#line hidden
#nullable disable
            );
            WriteLiteral(@""">Cập nhật trạng thái</button>
                    </div>
                </div>
            </div>
        </div>

        <div class=""row"">
            <div class=""col-12"">
                <div class=""card"">
                    <div class=""card-header"">
                        <h3 class=""card-title"">Chi tiết sản phẩm</h3>
                    </div>
                    <div class=""card-body"">
                        <table class=""table table-bordered"">
                            <thead>
                                <tr>
                                    <th>Sản phẩm</th>
                                    <th>Số lượng</th>
                                    <th>Đơn giá</th>
                                    <th>Thành tiền</th>
                                </tr>
                            </thead>
                            <tbody>
");
#nullable restore
#line 110 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                                 foreach (var detail in Model.OrderDetails)
                                {

#line default
#line hidden
#nullable disable

            WriteLiteral("                                    <tr>\r\n                                        <td>");
            Write(
#nullable restore
#line 113 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                                             detail.Product?.Name

#line default
#line hidden
#nullable disable
            );
            WriteLiteral("</td>\r\n                                        <td>");
            Write(
#nullable restore
#line 114 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                                             detail.Quantity

#line default
#line hidden
#nullable disable
            );
            WriteLiteral("</td>\r\n                                        <td>");
            Write(
#nullable restore
#line 115 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                                             detail.UnitPrice.ToString("N0")

#line default
#line hidden
#nullable disable
            );
            WriteLiteral(" VNĐ</td>\r\n                                        <td>");
            Write(
#nullable restore
#line 116 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                                              (detail.Quantity * detail.UnitPrice).ToString("N0")

#line default
#line hidden
#nullable disable
            );
            WriteLiteral(" VNĐ</td>\r\n                                    </tr>\r\n");
#nullable restore
#line 118 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                                }

#line default
#line hidden
#nullable disable

            WriteLiteral("                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"row\">\r\n            <div class=\"col-12\">\r\n                <a");
            BeginWriteAttribute("href", " href=\"", 6064, "\"", 6124, 1);
            WriteAttributeValue("", 6071, 
#nullable restore
#line 128 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
                          Url.Action("Index", "Order", new { area = "Admin" })

#line default
#line hidden
#nullable disable
            , 6071, 53, false);
            EndWriteAttribute();
            WriteLiteral(" class=\"btn btn-secondary\">Quay lại</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>\r\n\r\n<!-- Đảm bảo có token chống giả mạo -->\r\n<form id=\"statusForm\" style=\"display: none;\">\r\n    ");
            Write(
#nullable restore
#line 136 "D:\Desktop\Ogani-Net_Core\WebApplication1\Areas\Admin\Views\Order\Details.cshtml"
     Html.AntiForgeryToken()

#line default
#line hidden
#nullable disable
            );
            WriteLiteral("\r\n</form>\r\n\r\n");
            DefineSection("Scripts", async() => {
                WriteLiteral(@"
    <partial name=""_ValidationScriptsPartial"" />
    <script src=""https://code.jquery.com/jquery-3.6.0.min.js""></script>
    <script>
        $(document).ready(function () {
            $('#updateStatusBtn').click(function () {
                var orderId = $(this).data('order-id');
                var newStatus = $('#statusSelect').val();
                var token = $('input[name=""__RequestVerificationToken""]').val();

                console.log('Sending AJAX request with:');
                console.log('Order ID: ' + orderId);
                console.log('New Status: ' + newStatus);
                console.log('Token: ' + token);

                if (!newStatus) {
                    showStatusMessage('Vui lòng chọn trạng thái.', false);
                    return;
                }

                if (!token) {
                    showStatusMessage('Không tìm thấy token chống giả mạo.', false);
                    return;
                }

                $.ajax({
            ");
                WriteLiteral(@"        url: '/Admin/Order/UpdateStatus',
                    type: 'POST',
                    contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
                    data: {
                        id: orderId,
                        status: newStatus,
                        __RequestVerificationToken: token
                    },
                    success: function (response) {
                        console.log('AJAX Success:');
                        console.log(response);
                        if (response.success) {
                            $('#orderStatus').text(newStatus);
                            showStatusMessage('Cập nhật trạng thái thành công!', true);
                        } else {
                            showStatusMessage(response.message || 'Có lỗi xảy ra khi cập nhật trạng thái.', false);
                        }
                    },
                    error: function (xhr, status, error) {
                        console.log('AJAX Error");
                WriteLiteral(@" - Status: ' + status + ', Error: ' + error);
                        console.log('Response Text: ' + xhr.responseText);
                        showStatusMessage('Có lỗi xảy ra khi gửi yêu cầu: ' + error + ' (Status: ' + xhr.status + ')', false);
                    }
                });
            });

            function showStatusMessage(message, isSuccess) {
                var messageDiv = $('#statusMessage');
                var icon = $('#statusIcon');
                var text = $('#statusText');

                messageDiv.removeClass('alert-success alert-danger');
                icon.removeClass('fas fa-check fas fa-exclamation-triangle');

                if (isSuccess) {
                    messageDiv.addClass('alert-success');
                    icon.addClass('fas fa-check');
                } else {
                    messageDiv.addClass('alert-danger');
                    icon.addClass('fas fa-exclamation-triangle');
                }

                text.text(mess");
                WriteLiteral("age);\r\n                messageDiv.show();\r\n\r\n                setTimeout(function () {\r\n                    messageDiv.fadeOut();\r\n                }, 3000);\r\n            }\r\n        });\r\n    </script>\r\n");
            }
            );
        }
        #pragma warning restore 1998
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<WebApplication1.Models.Order> Html { get; private set; } = default!;
        #nullable disable
    }
}
#pragma warning restore 1591
